<!DOCTYPE html>
<html>
<head>
<title>Combinatorics Generator</title>
<style>
body, button, input, select, textarea {background-color: #222; color: #fff; font-family: arial;}
body {overflow: hidden;}
button {background-color: #0cc; color: #000; position: absolute; left: calc(100% - 75px); width: 75px;}
h3, textarea {margin: 10px 0px;}
input {width: 100px;}
textarea {width: 100%; height: 85vh; resize: none; line-height: 1.5em;}
</style>
</head>
<body>
<h3>Combinatorics Generator</h3>
<span>Generation type:</span>
<select id="genType">
<option value=0>Repeated permutations</option>
<option value=1>Repeated combinations</option>
<option value=2>Permutations</option>
<option value=3>Combinations</option>
<option value=4>Partitions into N parts</option>
<option value=5>Partitions into N distinct parts</option>
</select>
<span>Options:</span>
<input type="number" id="options" value=7>
<span>Choices:</span>
<input type="number" id="choices" value=3>
<button onclick="generate()">Generate</button><br>
<span id="outLength">Note: A high number of options or choices demand lots of computation, so be careful when using this tool.</span>
<textarea id="out"></textarea>
<script>
function generate() {
x = Number(options.value);
y = Number(choices.value);
mode = Number(genType.value);
output = [];
total = 0;
if (mode > 3) {x = x - y + 1;}
if (mode == 0) {total = x**y;}
if (mode == 1 || mode == 4) {total = nCr(x + y - 1, y, false);}
if (mode == 2) {total = nCr(x, y, true);}
if (mode == 3 || mode == 5) {total = nCr(x, y, false);}

while (output.length < total) {
set = Array.from({length: x}, (_, i) => i + 1);
comb = [];
for (i = 0; i < y; i++) {
random = set[Math.floor(Math.random() * set.length)];
comb.push(random);
if (mode == 2 || mode == 3 || mode == 5) {
index = set.indexOf(random);
if (index > -1) {set.splice(index, 1);}
}
if (mode == 1 || mode > 2) {comb.sort(function (a, b) {return a - b;})}
}
if (!output.includes(comb.toString())) {output.push(comb.toString());}
}
if (mode > 3) {
sums = [];
for (i = 0; i < output.length; i++) {
currentSum = output[i].split(",").reduce((partialSum, a) => Number(partialSum) + Number(a), 0);
if (currentSum == x + y - 1) {
sums.push(output[i].split(",").reverse().join("+"));
}}
output = sums;
}
collator = new Intl.Collator(undefined, {numeric: true, sensitivity: 'base'});
outLength.innerHTML = output.length + " combination(s) generated";
out.value = output.sort(collator.compare).join("\n");
function nCr(a, b, nPr) {
let aa = 1;
for (ii = a; ii > a - b; ii--) {aa *= ii;}
let bb = 1;
for (ii = 1; ii <= b; ii++) {bb *= ii;}
if (nPr) {return aa} else {return aa/bb};
}}
</script>
</body>
</html>
