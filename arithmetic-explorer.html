<!DOCTYPE html>
<html>
<head>
<title>Arithmetic Explorer</title>
<style>
* {
background-color: #222;
color: #fff;
font-size: 20px;
font-family: "arial";
text-align: center;
}
html {
height: 100%;
display: table;
margin: auto;
}
body {
height: 100%;
display: table-cell;
vertical-align: middle;
position: relative;
bottom: 20px;
}
h1 {
font-size: 40px;
}
.keypad {
width: 80px;
height: 60px;
font-size: 25px;
}
.functions {
width: 250.5px;
height: 40px;
}
#exprPrint, #resultPrint, #visual {
width: 1750px;
height: 60px;
line-height: 60px;
font-size: 50px;
border: 2px solid;
}
#exprPrint {
font-family: "times new roman";
}
#visual {
font-size: 31.25px;
word-wrap: break-word;
width: 1730px;
height: 280px;
line-height: 20px;
font-family: "consolas";
padding: 10px 10px;
}
</style>
<script src="/fraction.js"></script>
</head>
<body>
<h1>Arithmetic Explorer</h1>
<p>Keypad</p>
<div>
<button class="keypad" onclick="insert(0)">0</button>
<button class="keypad" onclick="insert(1)">1</button>
<button class="keypad" onclick="insert(2)">2</button>
<button class="keypad" onclick="insert(3)">3</button>
<button class="keypad" onclick="insert(4)">4</button>
<button class="keypad" onclick="insert(5)">5</button>
<button class="keypad" onclick="insert(6)">6</button>
<button class="keypad" onclick="insert(7)">7</button>
<button class="keypad" onclick="insert(8)">8</button>
<button class="keypad" onclick="insert(9)">9</button>
<button class="keypad" onclick="insert(&quot;+&quot;)">+</button>
<button class="keypad" onclick="insert(&quot;-&quot;)">-</button>
<button class="keypad" onclick="insert(&quot;*&quot;)">*</button>
<button class="keypad" onclick="insert(&quot;/&quot;)">/</button>
<button class="keypad" onclick="backspace()">&larr;</button>
</div>
<p>Expression</p>
<div id="exprPrint"></div>
<p>Result</p>
<div id="resultPrint"></div>
<p>Visualization</p>
<div id="visual"></div>
<p>Functions</p>
<button class="functions" onclick="clearAll()">Clear Expression</button>
<button class="functions" onclick="shuffle()">Randomly Shuffle Terms</button>
<button class="functions" onclick="generate()">Generate Expression</button>
<button class="functions" onclick="multiplyAll()">Multiply All Terms</button>
<button class="functions" onclick="exponent()">Repeated Multiplication</button>
<script>
var input = "";
function insert(c) {
input += String(c);
}
function backspace() {
input = String(input).slice(0, -1);
}
function multiplyAll() {
scale = prompt("Enter a nonnegative integer or fraction...");
scale = String(scale).replace(/[A-Za-z]/g, "");
signsD = "#" + String(input).replace(/[0-9*/]/g, "");
expressionD = String(input).split(/[+-]/g);
expressionD = expressionD.map(i => String(i) + "*" + scale);
reconstructed = "";
for (i = 0; i < expressionD.length; i++) {
reconstructed += String(signsD[i]) + String(expressionD[i]);
}
input = String(reconstructed).replace("#", "");
}
function clearAll() {
input = "";
}
function generate() {
input = "";
for (i = 0; i < 2 + Math.floor(Math.random() * 4); i++) {
input = String(input) + String(Math.floor(Math.random() * 100)) + ["+", "-", "*", "/"][Math.floor(Math.random() * 4)];
}
input = String(input).slice(0, -1);
}
function shuffle() {
input = shuffleArr(String(input).split("+")).join("+");
input = shuffleArr(String(input).split("-")).join("-");
input = shuffleArr(String(input).split("*")).join("*");
input = shuffleArr(String(input).split("/")).join("/");
}
function shuffleArr(arr) {
return arr.map(value => ({value, sort: Math.random()})).sort((a, b) => a.sort - b.sort).map(({value}) => value);
}
function exponent() {
expoBase = prompt("Enter a nonnegative integer or fraction...");
expo = prompt("How many times to repeat?");
if (String(input).charAt(String(input).length - 1) == "/") {
input = String(input) + Array(Number(expo)).fill(String(expoBase)).join("/");
} else {
input = String(input) + Array(Number(expo)).fill(String(expoBase)).join("*");
}
}
setInterval(function() {
resultPrint.innerHTML = "";
visual.innerHTML = "";
var prettyExpr = String(input).replaceAll("+", " + ").replaceAll("-", " - ").replaceAll("*", " * ");
exprPrint.innerHTML = prettyExpr;
if (String(exprPrint.innerHTML).length > 64) {
exprPrint.style.fontSize = 3200/String(exprPrint.innerHTML).length + "px";
} else {
exprPrint.style.fontSize = "50px";
}
var signs = "+" + String(input).replace(/[0-9*/]/g, "");
var expression = String(input).split(/[+-]/g);
var adder = Fraction(0);
for (i = 0; i < expression.length; i++) {
var factors = "*" + String(expression[i]).replace(/[0-9]/g, "");
var product = String(expression[i]).split(/[*/]/g);
var multiplier = Fraction(1);
for (j = 0; j < product.length; j++) {
if (factors[j] == "*") {var multiplier = multiplier.mul(product[j])}
if (factors[j] == "/") {var multiplier = multiplier.div(product[j])}
}
if (signs[i] == "+") {var adder = adder.add(multiplier)}
if (signs[i] == "-") {var adder = adder.sub(multiplier)}
}
var result = String(adder.toFraction(true)).replaceAll("/", "\u2044");
resultPrint.innerHTML = result;
if (String(resultPrint.innerHTML).length > 60) {
resultPrint.style.fontSize = 3000/String(resultPrint.innerHTML).length + "px";
} else {
resultPrint.style.fontSize = "50px";
}
if (Number(result) >= 0 && Number(result) <= 1400) {
visual.innerHTML = "&bull;".repeat(Number(result));
}
});
</script>
</body>
</html>
